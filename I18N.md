# Internationalization (i18n) Guide - OpenClaw-German

This document describes the internationalization system for OpenClaw-German.

## Overview

OpenClaw-German supports multiple languages with English as the default and German as the first fully supported language. The i18n system is built with TypeScript and provides type-safe translation keys.

## Supported Languages

- `en` - English (default)
- `de` - German
- More to come... (planned: fr, es)

## Architecture

### Files

```
src/locale/
â”œâ”€â”€ index.ts      # Core i18n interface and implementation
â”œâ”€â”€ en.ts         # English translations (fully expanded)
â”œâ”€â”€ de.ts         # German translations (fully expanded)
â””â”€â”€ helpers.ts    # Helper functions for language detection, validation, etc.
```

### Usage

```typescript
import { getI18n } from './locale/index.js';

const i18n = getI18n();

// Simple translation
const message = i18n.t('common.hello'); // "Hello" or "Hallo"

// Translation with parameters
const version = i18n.t('cli.version', { version: '1.0.0' });
// "OpenClaw version 1.0.0" or "OpenClaw Version 1.0.0"

// Change language
i18n.setLanguage('de');

// Get current language
const lang = i18n.getLanguage(); // 'en' or 'de'
```

## Language Switcher Command

OpenClaw-German includes a built-in language switcher command:

```bash
# Display current language
openclaw language

# Set language to German
openclaw language de

# Set language to English
openclaw language en

# Reset to system default
openclaw language --reset
```

### Language Persistence

The language preference is saved to a `.openclaw-language` file in the current directory. This allows the language to persist across sessions.

### Environment Variables

The language can also be controlled via environment variables (in priority order):

1. `OPENCLAW_LANGUAGE` - Explicit language setting
2. `LANGUAGE` - System language variable
3. `LANG` - System locale variable
4. Fallback to `en` (English)

```bash
export OPENCLAW_LANGUAGE=de
openclaw --help  # Will show German text
```

## Adding Translations

### 1. Add key to all language files

```typescript
// en.ts
export const en: TranslationMessages = {
  cli: {
    newCommand: {
      description: 'This is a new command',
      usage: 'Usage: {{command}} [options]',
    }
  }
};

// de.ts
export const de: TranslationMessages = {
  cli: {
    newCommand: {
      description: 'Dies ist ein neuer Befehl',
      usage: 'Verwendung: {{command}} [Optionen]',
    }
  }
};
```

### 2. Use in code

```typescript
import { getI18n } from './locale/index.js';

const i18n = getI18n();
const desc = i18n.t('cli.newCommand.description');
```

## Translation Keys

Translation keys are dot-separated strings:

```
cli.usage
gateway.server.starting
agents.system.welcome
common.hello
```

### Key Naming Conventions

- Use lowercase letters
- Separate with dots for nesting
- Be descriptive but concise
- Group related translations
- Use consistent terminology

### Current Key Structure

```
common.*
  - General UI strings (buttons, status, etc.)
cli.*
  - Command-line interface messages
  banner
  help
  language
  version
  commands (command descriptions)
  errors
  success
  gateway (gateway CLI commands)
  config
  update
  memory
  logs
gateway.*
  - Gateway daemon messages
  server
  auth
  websocket
  health
discord.*
  - Discord bot messages
  commands
  messages
  embeds
agents.*
  - Agent system messages
  system
  subagent
browser.*
  - Browser control messages
nodes.*
  - Node management messages
  pairing
  status
  camera
  screen
cron.*
  - Cron job messages
webhooks.*
  - Webhook messages
plugins.*
  - Plugin management messages
skills.*
  - Skill management messages
security.*
  - Security messages
docs.*
  - Documentation messages
system.*
  - System information messages
```

## Parameters

Use `{{param}}` for interpolation:

```typescript
// Translation
"version": "OpenClaw version {{version}}"

// Usage
i18n.t('cli.version', { version: '1.0.0' });
```

## Language Detection

The system detects language from:

1. `.openclaw-language` config file (highest priority)
2. `OPENCLAW_LANGUAGE` environment variable
3. `LANGUAGE` environment variable
4. `LANG` environment variable
5. Falls back to `en` (English)

## Validation

Check for missing or extra translations:

```typescript
import { validateTranslations } from './locale/helpers.js';
import { en, de } from './locale/index.js';

const errors = validateTranslations({ en, de });
console.log(errors);
```

## Integration Status

### Completed âœ…

- [x] Core i18n infrastructure
- [x] Translation file structure (en.ts, de.ts)
- [x] Helper functions
- [x] Language switcher CLI command
- [x] Language persistence (config file)
- [x] Environment variable detection
- [x] CLI initialization
- [x] Basic translation keys expanded

### In Progress ðŸ”„

- [ ] CLI command translation integration (partial)
  - [x] docs-cli.ts
  - [ ] gateway-cli
  - [ ] config-cli
  - [ ] update-cli
  - [ ] memory-cli
  - [ ] Other CLI commands
- [ ] Discord message translation
  - [ ] Bot responses
  - [ ] Embed descriptions
  - [ ] Error messages
  - [ ] Slash command descriptions
- [ ] Gateway message translation
  - [ ] Server messages
  - [ ] Auth messages
  - [ ] WebSocket messages
  - [ ] Health check messages
- [ ] Agent system translation
  - [ ] Welcome messages
  - [ ] System prompts
  - [ ] Error handling

### Planned ðŸ“‹

- [ ] French (fr) translations
- [ ] Spanish (es) translations
- [ ] Translation extraction tool
- [ ] Translation coverage report
- [ ] Additional language documentation

## Translation Coverage

| Module | EN Keys | DE Keys | Coverage |
|--------|---------|---------|----------|
| Common | 18 | 18 | 100% |
| CLI | 60+ | 60+ | 100% |
| Gateway | 15 | 15 | 100% |
| Discord | 15 | 15 | 100% |
| Agents | 10 | 10 | 100% |
| Browser | 5 | 5 | 100% |
| Nodes | 15 | 15 | 100% |
| Cron | 10 | 10 | 100% |
| Webhooks | 5 | 5 | 100% |
| Plugins | 10 | 10 | 100% |
| Skills | 10 | 10 | 100% |
| Security | 5 | 5 | 100% |
| Docs | 3 | 3 | 100% |
| System | 8 | 8 | 100% |
| **Total** | **~200** | **~200** | **100%** |

## Testing

### Test Language Switching

```bash
# Test switching between languages
openclaw language de
openclaw --help  # Should show German

openclaw language en
openclaw --help  # Should show English
```

### Test All Translation Keys

```typescript
import { validateTranslations } from './locale/helpers.js';
import { en, de } from './locale/index.js';

const errors = validateTranslations({ en, de });
if (errors.length > 0) {
  console.error('Translation errors:');
  errors.forEach(err => console.error(err));
} else {
  console.log('All translations are valid!');
}
```

## Documentation

- German README: [README-DE.md](../README-DE.md)
- This guide: [I18N.md](../I18N.md)

## Contributing

When adding new translatable strings:

1. Add the English translation first to `src/locale/en.ts`
2. Add German translation immediately to `src/locale/de.ts`
3. Use descriptive keys following the naming conventions
4. Test both languages using `openclaw language <lang>`
5. Update this document if adding new sections
6. Run validation: `validateTranslations({ en, de })`

## Best Practices

1. **Always translate both languages together** - Never add keys to one language without the other
2. **Use descriptive keys** - `cli.gateway.starting` is better than `cli.msg1`
3. **Group related keys** - Keep translations for related features together
4. **Use parameters sparingly** - Only when necessary for dynamic content
5. **Keep it concise** - Translations should be short and to the point
6. **Test after changes** - Always test both languages after adding translations
7. **Document new sections** - Update this file when adding new key groups

## Future Enhancements

- [ ] Automatic translation file generation from code
- [ ] Translation memory system
- [ ] Pluralization support
- [ ] Date/time localization
- [ ] Number localization
- [ ] RTL (right-to-left) language support
- [ ] Translation editor UI
- [ ] Crowdsourced translations

## Support

For questions or issues related to i18n:
- Create an issue on GitHub
- Join the Discord community
- Check existing translations for patterns
